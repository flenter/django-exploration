box: wercker/python
services:
  - mies/postgis@0.0.5
# Build definition
build:
  # The steps that will be executed on build
  steps:
    - install-packages:
        packages: python3 python3-dev

    - script:
        name: setup virtual environment and activate it
        code: |
          virtualenv -p /usr/bin/python3 $HOME/py3env
          source $HOME/py3env/bin/activate

    - script:
        name: pip install
        code: |
          pip install -r requirements.txt

    - script:
        name: run django tests
        code: |
          python manage.py test

    - script:
        name: show python version
        code: |
            python -v

